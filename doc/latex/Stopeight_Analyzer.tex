\documentclass{report}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{biblatex}
\renewcommand{\baselinestretch}{1.25}
\newcommand\norm[1]{\left\lVert#1\right\rVert}

\addbibresource{Stopeight_Analyzer.bib}
\iffalse
\bibliography{Stopeight_Analyzer}{}
\bibliographystyle{plain}
\fi

\begin{document}
\title{Stopeight Analyzer}
\author{Fassio Blatter}
\maketitle

\chapter{Introduction}

The algorithm in this text has been developed during the years 2009 to 2016 by Specific Purpose Software GmbH. It is now open sourced, but mostly exists in the form of code fragments.\\
This file is in the Stopeight repository on Github. Please edit here:\\
\href{https://github.com/specpose/stopeight/tree/master/doc/latex/Stopeight_Analyzer.tex}{https://github.com/specpose/stopeight/tree/master/doc/latex/Stopeight\_Analyzer.tex}
A brief overview can be found here:\\
\href{https://www.stopeight.com/dev_analyzer.html}{https://www.stopeight.com/dev\_analyzer.html}\\\\
The Arcs $A \subset \mathbb{R}^2$ are an approximation of a set$\footnote{Midpoints have to be formally included for insertion only}$ $X \subset \mathbb{R}^2$:
\begin{align}
f \circ g: X \rightarrow A
\end{align}
\begin{equation*}
1 < card(X) < \infty
\end{equation*}
via the intermediate functions $f,g$ where the intermediate transversality $Y = X \cap A$ defines Arcs $U_{m}$. ~\cite[\nopp 9.9]{Loring} ($f \circ g$ is neither injective nor surjective) ~\cite[\nopp 2.1]{LauresSzymik}:
\begin{align}
f: X \rightarrow Y; g: Y \rightarrow A
\end{align}
Note: The set of Arcs A is a dim 1-manifold. In $A$ we can find a system of open sets. The set of charts $\{U_{m}\}$ covering the whole manifold $A$ is an atlas. ~\cite[\nopp 3.1.1.]{Fomenko} ~\cite[\nopp 4.5]{Wall} ($X$ is formally a discrete / dim 0-manifold)
\begin{align}
A = \cup_{m}U_{m}; (X = \cup_{n}V_{n})\\
Y: \text{0-submanifold} \Rightarrow dim(X)=0<codim(Y)=1 \Rightarrow X \text{ disjoint } A
\end{align}
\iffalse
Within $f$ we are assigning a sequence of three points to compact Hausdorf invervals ~\cite[\nopp 6.1.3.]{Mortad}:
\begin{equation}
\{x_{n}\}_{n \in \mathbb{N}} \mapsto \{S,C,E\}
\end{equation}\\
\fi
The approximation aims to find the maximal smooth atlas. Each chart $U_{m}$ has a start of Turn $T \ni S = \min \limits _{U_{m}}$, a Corner $C \in U_{m}$ and an end of Turn $T \ni E = \max \limits _{U_{m}}$. This format has the benefit of reducing the amount of data for $Computation$ (see Stopeight Comparator), while preserving the $Representation$ using quadratic bezier splines. ($U_{m}$ closed?)

\chapter{Representation}

The affine transformations $q$ are functions that map to control points $Q \subset \mathbb{R}^2$:
\begin{align}
q: S \times C \times E \rightarrow Q\\
Q \cap X = 0; Q \cap Y = 0
\end{align}
The combination $M = Y \cup Q$ has parts from the original $X$'s, and constructed $Q$'s that are not in $A$ $\footnote{insertion: $C \notin X$, otherwise: $C \in X \cap A$}$:
\begin{align*}
S,C,E \in X; Q \setminus A=\{q_{1}(S,C,E),q_{3}(S,C,E),q_{4}(S,C,E),q_{6}(S,C,E)\}
\end{align*}
and is composed of four quadratic bezier splines $\gamma_{H}(t)$:
\begin{align}
\gamma_{H}: \mathbb{R} \rightarrow \mathbb{R}^2; t \mapsto (x,y)
\end{align}
with control point sets $\{H_{1},...,H_{4}\}$ per chart of M. The Arc segment defining function $\xi$ forms the planar coordinates $(x',y')$ of Arc $U_{m}$:
\begin{equation}
\xi: \mathbb{R} \rightarrow A; t \mapsto (x,y)
\end{equation}
\begin{align*}
\xi(t) =
\begin{cases}
\gamma_{H_{1}}(t); H_{1}=\{S,q_{1}(S,C,E),q_{2}(S,C,E)\} & t \in [0,\frac{1}{4}]\\
\gamma_{H_{2}}(t); H_{2}=\{q_{2}(S,C,E),q_{3}(S,C,E),C\} & t \in [\frac{1}{4},\frac{1}{2}]\\
\gamma_{H_{3}}(t); H_{3}=\{C,q_{4}(S,C,E),q_{5}(S,C,E)\} & t \in [\frac{1}{2},\frac{3}{4}]\\
\gamma_{H_{3}}(t); H_{4}=\{q_{5}(S,C,E),q_{6}(S,C,E),E\} & t \in [\frac{3}{4},1]
\end{cases}
\end{align*}
Note: The continuous function $\xi$ makes the topological space $A$ path-connected. Therefore it is a $path$ from $U_{m}$ to $U_{m+1}$ and intersects at least once at the unilateral limit $S \cap E$. ($dim (U_{m} \cup U_{m+1}) \geq 1?)$. ~\cite[\nopp 6.1.3.]{Mortad}\\\\
In order to compare the length from $[a,b] \subseteq A$ with $[a.b] \subseteq X$, we have to connect all $P_{n}, P_{n+1} \in X$ with one linear bezier spline each, because $X$ is discrete:
\begin{align}
\iota: \mathbb{R} \rightarrow B; t \mapsto (x,y)\\
\iota_{X}(t) = \{ \gamma_{H}(t)\lvert H=\{P_{n},P_{n}+\frac{(P_{n+1}-P_{n})}{2},P_{n+1}; P_{n}, P_{n+1} \in X\}\}\\
dim(B)=1<codim(Y)=1 \Rightarrow B \text{ joint } A
\end{align}
Note: For both $B$ and $A$, the length of the curve is now independent of the choice of parameter on the curve. ~\cite[\nopp 1.1]{Taimanov}\\\\
The arc-length metric $d(a,b)$ turns both manifolds $A$ and $B$ into metric spaces $(A,d)$ and $(B,d)$. ($\frac{d}{dt}$.
\begin{equation}
d(a,b) = \int \limits _{a}^{b}\lvert \frac{\mathrm{d}}{\mathrm{d}t}\gamma(t)\rvert \mathrm{d}t
\end{equation}
We can now establish an injective $link$ between elements of $B$ and $A$. ($X \rightarrow A$ is injective, $but$ $A \rightarrow X$ is not accurate):
\begin{equation}
link: B \rightarrow A, (x,y) \mapsto (x',y'); link^{-1}: A \rightarrow B, (x',y') \mapsto (x,y)
\end{equation}

\chapter{Computation}

\section{Non-Oriented Segments}
The curve functions can be interprated as $\gamma(t,x(t),y(t))$. The derivative is the total derivative.
\begin{align}
\frac{\mathrm{d}}{\mathrm{d} t} \gamma (t) = \gamma(t) \begin{bmatrix} \underbrace{\frac{\partial}{\partial t} \mathrm{d} t}_{\text{is the same for } \xi \text{ and } \iota \text{because of metric (12)}} & \frac{\partial}{\partial x}  \mathrm{d} x & \frac{\partial}{\partial y} \mathrm{d} y \end{bmatrix} \frac{1}{\mathrm{d}t}
\end{align}
Auxiliary functions are functions of the form $A,B \times A,B \rightarrow \mathbb{R}$ that can be applied to any segment $[a,b] \subseteq (B,d),(A,d)$ without any constraints. Nervertheless the direction of analysis $o$ is preserved in the sign for both straightness and curvature.
\begin{align}
o = \frac{(b-a)}{\lvert b-a \rvert}
\end{align}
The diameter is also based on the metric (12) of $\iota_{T}$. Equivalent to Straightness, sign changes in the direction of analysis.
\begin{equation}
diameter_{h}(a,b)= o \lvert \iota_{T}(b) - \iota_{T}(a) \rvert
\end{equation}

\subsection{Straightness}
A straight line segment is determined by a straightness measure.\\
The metric (12) allows us to take the ratio of the difference of the jitter to the straight and the difference of the arc to the straight with $P_{n},P_{n+1} \in X$. \\
\begin{align}
straightness_{Rel}(a,b)=\frac{\int \limits _{a}^{b} \lvert \iota_{X}'(t) \rvert \mathrm{d}t}{diameter_{h}(a,b)}
\end{align}
(Please take note of the sign here. The difference of sign in the numerator and the denominator indicate changing signs of times.)\\
\iffalse
\subsubsection{Algorithm Version}
It is using Heron's formula for the area of a triangle:
\begin{align*}
A=\lvert t_{m+1}-t_{m} \rvert\\
B=\lvert t_{m+2} - t_{m+1} \rvert\\
C=\lvert t_{m+2} - t_{m} \rvert\\
S=\frac{A+B+C}{2}
\end{align*}
to calculate the ratio of the areas in $A$ and lines in $B$:
\begin{align}
straightness([a,b])=\sum_{t=a}^{b-2}o\frac{\sqrt{\xi(S)(\xi(S)-\xi(A))(\xi(S)-\xi(B))(\xi(S)-\xi(C))}}{\iota(A)+\iota(B)}
\end{align}
\fi
A threshold can be chosen, which makes the segment straight or bent in A.\\
It is closely related to the curvature measure.

\iffalse
\subsection{Area}
\subsubsection{Algorithm Version}
The integral of the area in the legal segment, so that:
\begin{align}
area([a,b])= \int \limits _{\xi'_{x}(a)}^{\xi'_{x}(b)} \xi'_{y}(t)\mathrm{d}t
\end{align}
\fi

\subsection{Curvature}
\iffalse
Because the diameter has to be calculated piece-wise, we have to set up a vector space with the turns $P_{n},P_{n+1} \in T$.
\begin{equation}
v \in (B,\norm{\cdot})
\end{equation}
Note: It is a Banach space.\\
\fi
Curvature is determined by the ratio of Area to Diameter.
\begin{align}
curvature_{Rel}(a,b) = \frac{\int \limits _{a}^{b} \lvert \xi'(t) \rvert \mathrm{d}t}{diameter_{h}(a,b)}
\end{align}

\subsection{Corner}
A curvature is composed of an infinite amount of local maxima. Therefore the Corner $C$ in a segment $[a,b] \subseteq B$ is:
\begin{equation}
C = \sup_{U}\lvert curvature(a,b) \rvert
\end{equation}

\subsection{Turn}
A turn $T$ is a change of sign in the direction of the curve. In a segment $[a,b] \subseteq B$ an infinite amount of non-straight sections can be found.\\
(Does it exist?)
\begin{equation}
T = \inf_{t \in U} \lvert \xi(t) \rvert
\end{equation}
The criteria, whether a segment is within a chart is ~\cite[\nopp 20.7]{Loring}:
\begin{equation}
[a,b] \subseteq U_{m} \Rightarrow \exists  \xi(t) - \iota_{T}(t) >0 \land \nexists \xi(t) - \iota_{T}(t) \leq0
\end{equation}

\subsection{Legal Segment}
A legal segment is an affine transformtion of the arc curve function $transform(\xi) = \xi'$, so that all $\xi'_{y}(t)$ for $\xi'_{x}(t)$ are continuous (when):
\begin{align}
\xi'_{x}(a),\xi'_{y}(a), \xi'_{y}(b) = 0 \Leftrightarrow \iota'_{x}(a),\iota'_{y}(a), \iota'_{y}(b) = 0
\end{align}

\subsection{Affine Transformation}
An affine transformation $M$ of a parametrised curve $\gamma_{H}$ with control points $\{h_{1},h_{2},h_{3}\} = H$ and parameter $t$:
\begin{equation}
transform(\gamma):
\begin{bmatrix}
1 & t & t^2
\end{bmatrix}
\underbrace{\begin{bmatrix}
1 & 0 & 0\\
-2 & 2 & 0\\
1 & -2 &1
\end{bmatrix}}_{Coefficients}
\begin{bmatrix}
Mh_{1} & Mh_{2} & Mh_{3}
\end{bmatrix}
=
\begin{bmatrix}
h_{1}' & h_{2}' & h_{3}'
\end{bmatrix}
\end{equation}
The composite $transform(\xi)$ is based on parameter $t$ and $\{H_{1}, ... ,H_{4}\}$.

\section{Oriented Sections}
The second order total derivative.\\
Binomial.
\begin{align}
\frac{\mathrm{d}^2}{\mathrm{d}t}\gamma(t)=\partial^2 \gamma(t) \begin{bmatrix} \frac{\mathrm{d}x^2}{\partial x^2} & 2 \frac{\mathrm{d}x\mathrm{d}y}{\partial x \partial y} & \frac{\mathrm{d}y^2}{\partial y^2}\end{bmatrix}\frac{1}{\mathrm{d}t}
\end{align}
Or Trinomial.
\begin{align}
\frac{\mathrm{d}^2}{\mathrm{d}t}\gamma(t)=\partial^2 \gamma (t) \begin{bmatrix}\frac{\mathrm{d}^2 x}{\partial^2 x} & 2 \underbrace{\frac{\mathrm{d}t}{\partial t}}_{1} \frac{\mathrm{d}x}{\partial x} & 2 \frac{\mathrm{d}x\mathrm{d}y}{\partial x \partial y} & 2 \underbrace{\frac{\mathrm{d}t}{\partial t}}_{1} \frac{\mathrm{d}y}{\partial y} & \frac{\mathrm{d}^2 y}{\partial^2 y}\end{bmatrix}\frac{(\partial x + \partial y)^2}{\mathrm{d}^2 t}
\end{align}
Stopeight functions are functions of the form $(a,b) \mapsto (a',b')$ that can be applied to certain sections $[a,b],[a',b'] \subseteq (B,d),(A,d)$ with constraints of analytic priority.\\\\
In computer science there is the concept of the stream operator. This means that approximation $A$ would have to be recomputed whenever elements are added to the front or to the tail ($A$ is open). Also it would require that a supremum arc length would have to be found from all the sections between turns $A \cap T$. It would make sense that the longest Spiral be chosen, which depends on curvature. One could also argue that the longest ZigZag with an absolute straightness of $1$ be chosen for the first center. Spreading out left and right, a mixed approach or a fully centered one could be chosen.\\\\
For the time being, the approach in this paper is a compromise ($A$ is closed). Half-open front and tail sections $\footnote{It is questionable, whether losing front/tail sections is significant for most uses}$ are obliterated and the oriented manifolds between them are never fully centered. In particular the Crests and Dunes exhibit a frontside/backside phenomenon, which significantly shifts the consecutive oriented functions. Differentiating between Dunes and Spikes also requires a reversal of the direction of analysis. This reversal imposes a certain rigor in programming techniques. A compatible software architecture is a requirement.\\
Nevertheless the curve can be interpreted, if a threshold in Stopeight Comparator is increased, which lowers the requirement for overlay comparison matching accuracy.\\\\
It all comes down to whether oriented submanifolds are allowed and whether the enclosing submanifolds and the whole manifold are allowed to be oriented. (Causal Structure)\\\\

\subsection{Cliff}
A maximal absolute curvature $\frac{(\pi r^2) /2}{2r}$ is defined by a unit half circle $r=1$. So curvature is no more than $(x')^2 + (y')^2 =1$  under any linear transformation of any segment.
A single Cliff can have no more than the maximum curvature.

\subsection{Swing}
A Swing is the segment $a,b \in Y$, where a legal segment is followed by a sign change $[c,d]; c<d$ under affine transformation $\xi'$.\\
(The changing signs of times)
\begin{align}
\end{align}

\subsection{Crest}

\subsection{Dune}
(half Dune is Cliff)
They only occur in last priority.

\subsection{Spike}
(Two Dunes are two straights if they overlap)

\subsection{Straight}
(half Dune is Straight)

\section{Compact Covers}
(orientation flips sign of value)
\begin{align}
jitter(a.b)=\int \limits _{a}^{b}\lvert \iota_{X}(t) - \iota_{T}(t) \rvert \mathrm{d}t\\
area_{v}(a,b)=\int \limits _{a}^{b} \lvert \xi(t)-\iota_{T}(t) \rvert \mathrm{d}t
\end{align}
\begin{align}
straightness_{Abs}(a.b)=\frac{jitter(a,b)}{diameter_{h}(a,b)}
\end{align}
\begin{align}
curvature_{Abs}(a,b) = \frac{area_{v}(a,b)}{diameter_{h}(a,b)}
\end{align}
(Or if Corners are parametrised!! $P_{n},P_{n+1} \in C$?)
\begin{align}
area_{h}(a,b)=\int \limits _{0}^{} \lvert \xi(b-t)-\xi(a+t) \rvert \mathrm{d}t\\
diameter_{v}(a,b)=\int \limits _{0}^{} \lvert \iota_{X}(b-t)-\iota_{X}(a+t)\rvert \mathrm{d}t\\
curvature_{Abs}(a,b) = \frac{area_{h}(a,b)}{diameter_{v}(a,b)}
\end{align}
\subsection{Spiral}
Spiral $\supset$ Cliff\\
An even number of Cliffs is found under the curvature criteria.
The Cliffs are then centered outside in so that all cliffs in a spiral have the same curvature.
\subsection{ZigZag}
ZigZag $\supset$ Spike
\subsection{Swell}
Swell $\supset$ Crest, Swell $\supset$ Swing

\chapter{Comparator}
\subsection{Impulses}
Impulses are consecutive pulses of variable wavelengths which originate from the same source and are separated from other overlaping impulses.\\\\
A complex norm $\norm{\cdot}$ is defined on the transversality (2).
\begin{align}
\norm{\cdot} : \mathbb{C} \rightarrow \mathbb{R}\\
\norm{z} = \sqrt{Re(z)^2+Im(z)^2}
\end{align}

\subsection{Imaginary Visibility}
The changing signs of times.
sign sense of analysis flipping\\
When curvature is decreased in a Spiral, Dunes and Spikes start appearing.\\
(Important Note: When the direction of analysis is reversed, the curve areas lie on the other side, therefore the direction is part of visibility, not isolation)
\begin{align}
\mu_{+}(\{[a,b] \subseteq A,B \vert \xi(t) -\iota_{T}(t)\geq0\})
\end{align}
Note: $\mu$ is a Lebesgue.
\begin{align}
visibility([a,b])=curvature[a,b]
\end{align}

\subsection{Real Isolation}
$sign product of set of signs of turns$\\
If the sections are being extracted from left to right $[a,b];a<b$, isolation is positive. If the direction of analysis is reversed $[b,a]$, isolation is negative.\\
Opposite wave direction: Negative Visibility.

\begin{align}
\eta_{+}=(\{[a,b] \subseteq A,B \vert a<b\})
\end{align}
Note: $\eta$ is a Lebesgue.
\begin{equation}
isolation([a,b])=straightness([a,b])
\end{equation}

\chapter{Morphisms}

The complex conjugate is the other side of the wave vs\\
The imaginary part is the other side of the wave\\
The imaginary part is the phase shift (fft)\\
The other side of the wave is imaginary.\\
(multiplication? addition?)
\begin{align}
A,B \times A,B \rightarrow \mathbb{C}\\
(a,b) \mapsto z\\
\end{align}

\section{Wave Trains}
The mathematically most intriguing oriented submanifolds are Crests and Spikes. We introduce a mechanism for the annihilation and creation of pulses, which in most signal analysis is overlooked. Physical phenomena such as the creation of enthalpy and enthropy during phase transitions could be modeled. A Crest would appear in the outgoing phase when a signal of enthropy brakes in the corresponding medium of the carrier. A Spike is a beat that appears in joint states of crystal grids when the incoming phase accumulates in a $different$ medium.
Traveling wave trains are moving over stationary reef chains. Upon creation, enthropic wave trains are impulses, at the least even a part of a half-pulse (Example Spiral). Enthalpic reef chains change state when they are converted to a plasma state for an infinitesimal short period of time.\\\\
A wave train (dirac delta?) appears in a wave packet that splits up. A wave packet that splits, decreases its isolation and transfers a part of its visibility to the sub-wave packets. Depending on the wavelength of a Reef, the original wave packet may never appear again.\\\\
On the other hand, the sub-wave packets of an open ocean wave pick up wind. The enclosing wave packet can form a new wave train, together with neighbouring wave packets and so slowly, the little left-over, chaotic visibility of the sub-wave packets gets transferred not only to the enclosing wave packet, but to the whole wave train. The swell gets groomed and the short wavelengths disappear.\\\\
Because in any accurate measurement of matter, only a limited number of reef chains can be considered; For the multitude of periodic energy passing over a reef chain, all products of the chain are compared, up to the length of the frame of the train.
It would make sense to map them in a complex plane, mostly because the definition of a complex conjugate would explain why for example a Crest starts appearing on a Reef, and different, purely imaginary waveforms appear in open ocean waters where waves travel in arbitrary directions.

\subsection{Spectral Separation}
There are two main criteria among which the waves can vary. The absolute measure for separation is visibility and isolation.\\
They occur periodically in a Swell and imply a reduction of the measure space.\\
In signal analysis, there is the notion of source separated and spectral separated pulses. Separation algorithms would benefit from an isolation parameter, indicating whether the pulses ...
The directed waves of straightness and curvature going forward/backward synchronously are periodic.
For Crests / Swell.
\begin{align}
z =  (\xi(t)-\iota_{X}(t))*(\cos{(visibility([a,b]))} +\mathrm{i} \sin{(isolation([a,b]))})\\
\end{align}

\subsection{Wave Generation}
Supraliquid, Sail Effect / Surface Tension
\subsection{Phase Transitions}
Spiral\\
When curvature is increased in a Spiral, isolation starts to shift to subsegments. Points in $Y$ become uncertain at around $2\pi/3$.
For Dune/Spiral.
\begin{align}
z =  \sup_{U}\lvert curvature([a,b]) \rvert*(\cos{(isolation([a,b]))} +\mathrm{i} \sin{(visibility([a,b]))})
\end{align}

\subsection{Lightning}
Superconductor\\
For Spike/ZigZag.\\
If we're setting $\sqrt{1-y^2}$ to be the linear part of complex plane, $\phi$ in $z=\sqrt{1-y^2}e^{i\phi}$ is the rotational part.
\begin{align}
z =  straightness([a,b]) + \mathrm{i} curvature([a,b])
\end{align}

\subsection{Stateless}
Supercritical gas (liquid/gas) carbondioxide

\printbibliography

\end{document}