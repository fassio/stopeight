\documentclass{article}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{biblatex}
\renewcommand{\baselinestretch}{1.25}

\addbibresource{Stopeight_Analyzer.bib}
\iffalse
\bibliography{Stopeight_Analyzer}{}
\bibliographystyle{plain}
\fi

\begin{document}
\title{Stopeight Analyzer}
\author{Fassio Blatter}
\maketitle

\section{Introduction}

The algorithm in this text has been developed during the years 2009 to 2016 by Specific Purpose Software GmbH. It is now open sourced, but mostly exists in the form of code fragments.\\
This file is in the Stopeight repository on Github. Please edit here:\\
\href{https://github.com/specpose/stopeight/tree/master/doc/latex/Stopeight_Analyzer.tex}{https://github.com/specpose/stopeight/tree/master/doc/latex/Stopeight\_Analyzer.tex}
A brief overview can be found here:\\
\href{https://www.stopeight.com/dev_analyzer.html}{https://www.stopeight.com/dev\_analyzer.html}\\\\
The Arcs $A \subset \mathbb{R}^2$ are an approximation of a set$\footnote{Midpoints have to be formally included for insertion only}$ $X \subset \mathbb{R}^2$:
\begin{align}
f \circ g: X \rightarrow A
\end{align}
\begin{equation*}
1 < card(X) < \infty
\end{equation*}
via the intermediate functions $f,g$ where the intermediate transversality $Y = X \cap A$ defines Arcs $U_{m}$. ~\cite[\nopp 9.9]{Loring} ($f \circ g$ is neither injective nor surjective) ~\cite[\nopp 2.1]{LauresSzymik}:
\begin{align}
f: X \rightarrow Y; g: Y \rightarrow A
\end{align}
Note: The set of Arcs A is a dim 1-manifold. In $A$ we can find a system of open sets. The set of charts $\{U_{m}\}$ covering the whole manifold $A$ is an atlas. ~\cite[\nopp 3.1.1.]{Fomenko} ~\cite[\nopp 4.5]{Wall} ($X$ is formally a discrete / dim 0-manifold)
\begin{align}
A = \cup_{m}U_{m}; (X = \cup_{n}V_{n})\\
Y: \text{0-submanifold} \Rightarrow dim(X)=0<codim(Y)=1 \Rightarrow X \text{ disjoint } A
\end{align}
\iffalse
Within $f$ we are assigning a sequence of three points to compact Hausdorf invervals ~\cite[\nopp 6.1.3.]{Mortad}:
\begin{equation}
\{x_{n}\}_{n \in \mathbb{N}} \mapsto \{S,C,E\}
\end{equation}\\
\fi
The approximation aims to find the maximal smooth atlas. Each chart $U_{m}$ has a start of Turn $T \ni S = \inf_{U_{m}}$, a Corner $C \in U_{m}$ and an end of Turn $T \ni E = \sup_{U_{m}}$. This format has the benefit of reducing the amount of data for $Computation$ (see Stopeight Comparator), while preserving the $Representation$ using quadratic bezier splines. ($U_{m}$ closed?)

\section{Representation}

The affine transformations $q$ are functions that map to control points $Q \subset \mathbb{R}^2$:
\begin{align}
q: S \times C \times E \rightarrow Q\\
Q \cap X = 0; Q \cap Y = 0
\end{align}
The combination $M = Y \cup Q$ has parts from the original $X$'s, and constructed $Q$'s that are not in $A$ $\footnote{insertion: $C \notin X$, otherwise: $C \in X \cap A$}$:
\begin{align*}
S,C,E \in X; Q \setminus A=\{q_{1}(S,C,E),q_{3}(S,C,E),q_{4}(S,C,E),q_{6}(S,C,E)\}
\end{align*}
and is composed of four quadratic bezier splines $\gamma_{H}(t)$:
\begin{align}
\gamma_{H}: \mathbb{R} \rightarrow \mathbb{R}^2; t \mapsto (x,y)
\end{align}
with control point sets $\{H_{1},...,H_{4}\}$ per chart of M. The Arc segment defining function $\kappa$ forms the planar coordinates $(x',y')$ of Arc $U_{m}$:
\begin{equation}
\kappa: \mathbb{R} \rightarrow A; t \mapsto (x,y)
\end{equation}
\begin{align*}
\kappa(t) =
\begin{cases}
\gamma_{H_{1}}(t); H_{1}=\{S,q_{1}(S,C,E),q_{2}(S,C,E)\} & t \in [0,\frac{1}{4}]\\
\gamma_{H_{2}}(t); H_{2}=\{q_{2}(S,C,E),q_{3}(S,C,E),C\} & t \in [\frac{1}{4},\frac{1}{2}]\\
\gamma_{H_{3}}(t); H_{3}=\{C,q_{4}(S,C,E),q_{5}(S,C,E)\} & t \in [\frac{1}{2},\frac{3}{4}]\\
\gamma_{H_{3}}(t); H_{4}=\{q_{5}(S,C,E),q_{6}(S,C,E),E\} & t \in [\frac{3}{4},1]
\end{cases}
\end{align*}
Note: The continuous function $\kappa$ makes the topological space $A$ path-connected. Therefore it is a $path$ from $U_{m}$ to $U_{m+1}$ and intersects at least once at the unilateral limit $S \cap E$. ($dim (U_{m} \cup U_{m+1}) \geq 1?)$. ~\cite[\nopp 6.1.3.]{Mortad}\\\\
In order to compare the length from $[a,b] \subseteq A$ with $[a.b] \subseteq X$, we have to connect all $P_{n}, P_{n+1} \in X$ with one linear bezier spline each, because $X$ is discrete:
\begin{align}
\iota: \mathbb{R} \rightarrow B; t \mapsto (x,y)\\
\iota_{X}(t) = \{ \gamma_{H}(t)\lvert H=\{P_{n},P_{n}+\frac{(P_{n+1}-P_{n})}{2},P_{n+1}; P_{n}, P_{n+1} \in X\}\}\\
dim(B)=1<codim(Y)=1 \Rightarrow B \text{ joint } A
\end{align}
Note: For both $B$ and $A$, the length of the curve is now independent of the choice of parameter on the curve. ~\cite[\nopp 1.1]{Taimanov}\\\\
The arc-length metric $d(a,b)$ turns both manifolds $A$ and $B$ into metric spaces $(A,d)$ and $(B,d)$. ($\frac{d}{dt}$: total derivative?)
\begin{equation}
d(a,b) = \int \limits _{a}^{b}\lvert \frac{\mathrm{d}}{\mathrm{d}t}\gamma(t)\rvert \mathrm{d}t
\end{equation}
We can now establish an injective $link$ between elements of $B$ and $A$. ($X \rightarrow A$ is injective, $but$ $A \rightarrow X$ is not accurate):
\begin{equation}
link: B \rightarrow A, (x,y) \mapsto (x',y'); link^{-1}: A \rightarrow B, (x',y') \mapsto (x,y)
\end{equation}
\section{Computation}

\subsection{Auxiliary Functions}

Auxiliary functions are functions of the form $[a,b] \rightarrow \mathbb{R}$ that can be applied to any segment $[a,b] \subseteq (B,d),(A,d)$ with certain preliminary constraints.

\subsubsection{Straightness}
A straight line segment is determined by a straightness measure.\\
The metric (12) allows us to take the ratio of the arc-length to straight lines with $P_{n},P_{n+1} \in X$:
\begin{equation}
straightness([a.b])=\int \limits _{a}^{b}\lvert \frac{\kappa(t)}{\iota_{X}(t)}\rvert \mathrm{d}t
\end{equation}
\iffalse
\subsubsection{Algorithm Version}
It is using Heron's formula for the area of a triangle:
\begin{align*}
A=\lvert t_{m+1}-t_{m} \rvert\\
B=\lvert t_{m+2} - t_{m+1} \rvert\\
C=\lvert t_{m+2} - t_{m} \rvert\\
S=\frac{A+B+C}{2}
\end{align*}
to calculate the ratio of the areas in $A$ and lines in $B$:
\begin{align}
straightness([a,b])=\sum_{t=a}^{b-2}\frac{\sqrt{\kappa(S)(\kappa(S)-\kappa(A))(\kappa(S)-\kappa(B))(\kappa(S)-\kappa(C))}}{\iota(A)+\iota(B)}
\end{align}
\fi
A threshold can be chosen, which makes the segment straight or bent in A. (Visibility)\\
It is closely related to the curvature measure.

\subsubsection{Area}
The metric (12) enables us to integrate over the turns $P_{n},P_{n+1} \in T$ connected by straight line segments $\iota_{T}$:
\begin{equation}
area([a.b])=\int \limits _{a}^{b}\lvert \kappa(t)-\iota_{T}(t)\rvert \mathrm{d}t
\end{equation}
\iffalse
\subsubsection{Algorithm Version}
The integral of the area in the legal segment, so that:
\begin{align}
area([a,b])= \int \limits _{\kappa'_{x}(a)}^{\kappa'_{x}(b)} \kappa'_{y}(t)\mathrm{d}t
\end{align}
\fi

\subsubsection{Curvature}
\iffalse
\newcommand\norm[1]{\left\lVert#1\right\rVert}
Because the diameter has to be calculated piece-wise, we have to set up a vector space with the turns $P_{n},P_{n+1} \in T$.
\begin{equation}
v \in (B,\norm{\cdot})
\end{equation}
Note: It is a Banach space.\\
\fi
The diameter is also based on the metric (12) of $\iota_{T}$:
\begin{equation}
diameter([a,b])=b-a; a,b \in B
\end{equation}
Curvature is determined by the ratio of Area to Diameter.
\begin{equation}
curvature([a,b]) = \frac{area([a,b])}{diameter([a,b])}
\end{equation}

\subsubsection{Corner}
A curvature is composed of an infinite amount of local maxima. Therefore the Corner $C$ in a segment $[a,b] \subseteq B$ is:
\begin{equation}
C = \sup_{t \in U_{m}}\lvert \frac{\mathrm{d}}{\mathrm{d}t}\kappa(t) \rvert
\end{equation}

\subsubsection{Turn}
A turn $T$ is a change of sign in the direction of the curve. In a segment $[a,b] \subseteq B$ an infinite amount of non-straight sections can be found.
\begin{equation}
E = \inf_{t \in U_{m}\setminus S} \lvert \frac{\mathrm{d}}{\mathrm{d}t}\kappa(t) \rvert
\end{equation}
The criteria, whether a segment is within a chart is:
\begin{equation}
[a,b] \subseteq U_{m} \Rightarrow \exists \inf_{t \in U_{m}} \frac{\mathrm{d}}{\mathrm{d}t}\kappa(t)\geq0 \land \nexists \inf_{t \in U_{m}} \frac{\mathrm{d}}{\mathrm{d}t}\kappa(t)<0
\end{equation}

\subsubsection{Legal Segment}
A legal segment is an affine transformtion of the arc curve function $transform(\kappa) = \kappa'$, so that all $\kappa'_{y}(t)$ for $\kappa'_{x}(t)$ are continuous when:
\begin{align}
\kappa'_{y}(a), \kappa'_{y}(b) = 0
\end{align}

\subsection{Affine Transformation}
An affine transformation $A$ of a parametrised curve $\gamma_{H}$ with control points $\{h_{1},h_{2},h_{3}\} = H$ and parameter $t$:
\begin{equation}
transform(\gamma):
\begin{bmatrix}
1 & t & t^2
\end{bmatrix}
\underbrace{\begin{bmatrix}
1 & 0 & 0\\
-2 & 2 & 0\\
1 & -2 &1
\end{bmatrix}}_{Coefficients}
\begin{bmatrix}
Ah_{1} & Ah_{2} & Ah_{3}
\end{bmatrix}
=
\begin{bmatrix}
h_{1}' & h_{2}' & h_{3}'
\end{bmatrix}
\end{equation}
The composite $transform(\kappa)$ is based on parameter $t$ and $\{H_{1}, ... ,H_{4}\}$.

\subsection{Cliff}
A maximal curvature $\frac{(\pi r^2) /2}{2r}$ is defined by a perfect half circle. So curvature is no more than $(x')^2 + (y')^2 =1$  under any linear transformation of any segment.
A single Cliff can have no more than the maximum curvature.

\subsection{Spiral}
An even number of Cliffs is found under the curvature criteria.
The Cliffs are then centered outside in so that all cliffs in a spiral have the same curvature.

\subsection{Swing}
A Swing is the segment $a,b \in Y$, where a legal segment is followed by a sign change $[c,d]; c<d$ under affine transformation $\kappa'$.
\begin{align}
\mu(\{t \in U_{m} \vert \kappa'(a)=0;\kappa'(b)=0;(\kappa'(c)\geq 0 \land \kappa'(d)<0) \lor (\kappa'(c)\leq 0 \land \kappa'(d)>0) \}) \mathrm{d}t
\end{align}
Note: $\mu$ is a Lebesgue.

\section{Morphisms}
There are two main criteria among which the wave segments $U_{m}$ can vary. It would make sense to map them in a complex plane, mostly because the definition of a complex conjugate would explain why for example a Crest starts appearing on a Reef, and different, purely imaginary waveforms appear in open ocean waters. In signal analysis, there is the notion of source separated and spectral separated pulses. Separation algorithms would benefit from an isolation parameter, indicating whether the pulses ...\\
We introduce a mechanism for the annihilation and creation of pulses, which in most signal analysis is overlooked. Physical phenomena such as the creation of enthalpy and enthropy during phase transitions could be modeled.

\subsection{Imaginary Visibility}
When curvature is decreased in a Spiral, Dunes and Spikes start appearing.

\subsection{Real Isolation}
When curvature is increased in a Spiral, isolation starts to shift to subsegments. Points in $Y$ become uncertain at around $2\pi/3$.

\subsection{Wave Trains}
A wave train (dirac delta?) appears in a wave packet that splits up. A wave packet that splits, decreases its isolation and transfers a part of its visibility to the sub-wave packets. Depending on the wavelength of a Reef, the original wave packet may never appear again.\\
On the other hand, the sub-wave packets of an open ocean wave pick up wind. The enclosing wave packet can form a new wave train, together with neighbouring wave packets and so slowly, the little left-over, chaotic visibility of the sub-wave packets gets transferred not only to the enclosing wave packet, but to the whole wave train. The swell gets groomed and the short wavelengths disappear.

\printbibliography

\end{document}